var t;function setTitle(e){$(".modalPequena");$(".pequenaTittle").text(e)}function setBody(e){$(".pequenaBody").text(e)}function hideBtSalvar(){$(".btSalvar").hide()}function showModal(){$(".modalPequena").show()}function hideModal(){$(".modalPequena").hide()}function eventos(){$(".btFechar").on("click",function(){hideModal()}),$(".cadastroEventoFechar").on("click",function(){$(".modalCadastro").hide()}),$(".data").mask("99/99/9999 99:99:99",{autoclear:!1}),$(".cadastrarEvento").on("click",insertEvent)}function getEvents(){var t;console.log("getEvents.js -> Function getEvents"),$.post("/getEvents").done(function(e){console.log("Eventos  ",e.events),t=arrumarData(e.events),$("#calendar").fullCalendar("addEventSource",t)})}function arrumarData(e){console.log("getEvents.js -> Function arrumarData");for(var t=e,n=0;n<e.length;n++)t[0].start=moment.utc(e[0].start).local().format(),t[0].end=moment.utc(e[0].end).local().format();return t=e}function createEvent(){console.log("insertEvent.js -> Function createEvent");var e={},t=$(".cadastroInicio").val(),n=$(".cadastroFim").val();return e.name=$(".cadastroNome").val(),e.finalidade=$(".cadastroFinalidade").val(),e.start=converteDataTimestamp(t),e.end=converteDataTimestamp(n),console.log("insertEvent.js -> Function createEvent -> Evento criado",e),e}function insertEvent(){console.log("insertEvent.js -> Function insertEvent"),$.ajax({url:"/events/insertEvent",type:"POST",data:createEvent(),dataType:"json",beforeSend:function(){console.log("cadastrando evento")},success:function(e){console.log("insert event")},error:function(){console.log("erro")}})}function converteDataTimestamp(e){var t=e.split(/\D/),n=t[0],a=t[1],o=t[2],l=t[3],c=t[4],i=t[5];return Date.UTC(o,a-1,n,l,c,i)}function clickDia(){$("#calendar").fullCalendar("option","dayClick",function(e){console.log("[interacao.js] - evento - Click "+e.format("DD/MM/YYYY HH:mm:ss")),$(".modalCadastro").show(),$(".modalCadastro").css("opacity",1)})}function selectDay(){console.log("[interacao.js] - selectDay"),$("#calendar").fullCalendar("option","select",function(e,t,n){console.log("interacao.js - evento - selec");var a=$(".cadastroInicio");a.val(e.format("DD/MM/YYYY HH:mm:ss")),$(".cadastroFim").val(t.format("DD/MM/YYYY HH:mm:ss")),console.log("inicio ",a),$(".modalCadastro").show()})}function clickEvento(){$("#calendar").fullCalendar("option","eventClick",function(e,t,n){console.log("[interacao.js] Evento -> Click sobre evento"),$(".modalPequena").show(),$(".pequenaTittle").text(e.title),$(".inicio").text(e.start.format("DD/MM/YYYY HH:mm:ss")),$(".fim").text(e.end.format("DD/MM/YYY HH:mm:ss")),$(".titulo").text(e.description),$(".pequenaBody").css("background-color",e.color),$(".usuario").text(e.user)})}function selecionadoJaExiste(){$("#calendar").fullCalendar("option","selectOverlap",function(e){return console.log("[interacao.js] Evento -> Selecionado Já Existe"),$(".modalPequena").show(),$(".pequenaTittle").text("Reserva não é possivel"),"background"===e.rendering})}$(function(){$("#calendar").fullCalendar({editable:!1,handleWindowResize:!0,weekends:!1,header:!0,minTime:"07:00:00",maxTime:"22:00:00",displayEventTime:!0,selectable:!0,height:500,weekends:!1,timezone:"America/Sao_Paulo",slotDuration:"00:30:00",slotLabelInterval:"01:00",header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay,listMonth"},defaultView:"agendaWeek",locale:"pt-br",timeFormat:"H(:mm)",displayEventEnd:!0,weekNumbers:!0,selectOverlap:!1,eventLimit:!0})}),$(document).ready(function(){eventos(),showModal()}),getEvents(),$(document).ready(function(){clickDia(),selectDay(),clickEvento(),selecionadoJaExiste()});